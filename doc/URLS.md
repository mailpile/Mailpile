# Mailpile URL map (autogenerated by mailpile/urlmap.py)

The URL space is divided into three main classes:

1. Versioned API endpoints
2. Nice looking shortcuts to common data
3. Shorthand paths to API endpoints (current version only)

Depending on the endpoint, it is often possible to request alternate
rendering templates or generate output in a variety of machine readable
formats, such as JSON, XML or VCard. This is done by appending a
psuedo-filename to the path. If ending in `.html`, the full filename is
used to choose an alternate rendering template, for other extensions the
name is ignored but the extension used to choose an output format.

The default rendering for API endpoints is JSON, for other endpoints
it is HTML. It is strongly recommended that only the versioned API
endpoints be used for automation.

## The API paths (version=0, JSON output)

### GET (also accept POST)

    /api/0/contact/           <nickname>/
    /api/0/contact/list/      [--full]/[<terms>]/
    /api/0/filter/list/       [<search>|=<id>]/
    /api/0/help/              [<command-group>|variables]/
    /api/0/help/splash/
    /api/0/help/urlmap/
    /api/0/help/variables/
    /api/0/message/           [raw]/<message>/
                              ?mid=[metadata-ID]
    /api/0/message/download/  <att>/<message>/[><fn>]/
    /api/0/message/draft/     [<messages>]/
                              ?mid=[metadata-ID]
    /api/0/message/unthread/
    ... POST only: mid=[message-id]
    /api/0/page/
    /api/0/pgp/checkaddress/  <address>/
                              ?q=[address]
    /api/0/pgp/decrypt/       <data>/
                              ?verify=[whether to verify (true/false/auto, default=auto)]&data=[the data to encrypt]&passphrase=[the passphrase (optional)]
    /api/0/pgp/encrypt/       <to>/<data>/[<sign>/<from>]/
                              ?to=[encrypt messages to]&from=[from which key (only if signing)]&data=[the data to encrypt]&sign=[whether to sign (true/false, default=true)]
    /api/0/pgp/listkeys/      [<secret>]/
                              ?filter=[filter]&secret=[secret keys]
    /api/0/pgp/sign/          <from>/<data>/
                              ?from=[from which key]&data=[the data to sign]
    /api/0/pgp/verify/        <data>/
                              ?data=[the data to verify]
    /api/0/search/            [@<start>]/<terms>/
                              ?q=[search terms]&start=[start position]&end=[end position]&order=[sort order]
    /api/0/settings/          <var>/
                              ?var=[section.variable]
    /api/0/shownetwork/       <terms>/
                              ?q=[search terms]&start=[start position]&end=[end position]&order=[sort order]
    /api/0/tag/list/          [<wanted>|!<wanted>]/[...]/
                              ?not=[tags]&only=[tags]

### POST

    /api/0/contact/add/       <msgs>/
    /api/0/contact/remove/    <email>/
    /api/0/contact/set/       <email>/<attr>/<value>/
    /api/0/message/attach/    <messages>/[<path/to/file>]/
    ... POST only: file-data=[file data]&mid=[metadata-ID]
    /api/0/message/compose/
    ... POST only: body=[..]&from=[..]&cc=[..]&mid=[metadata-ID]&bcc=[..]&to=[..]&subject=[..]
    /api/0/message/forward/   [att]/<messages>/
                              ?mid=[metadata-ID]
    /api/0/message/reply/     [all]/<messages>/
                              ?mid=[metadata-ID]
    /api/0/message/send/      <messages>/[<emails>]/
    ... POST only: to=[recipients]&mid=[metadata-ID]
    /api/0/message/update/    <messages>/<<filename>/
    ... POST only: body=[..]&to=[..]&file-data=[file data]&from=[..]&cc=[..]&subject=[..]&mid=[metadata-ID]&bcc=[..]
    /api/0/message/update/send/
    ... POST only: body=[..]&to=[recipients]&file-data=[file data]&from=[..]&cc=[..]&subject=[..]&mid=[metadata-ID]&bcc=[..]
    /api/0/pgp/decrypt/       <data>/
                              ?verify=[whether to verify (true/false/auto, default=auto)]&data=[the data to encrypt]&passphrase=[the passphrase (optional)]
    /api/0/pgp/encrypt/       <to>/<data>/[<sign>/<from>]/
                              ?to=[encrypt messages to]&from=[from which key (only if signing)]&data=[the data to encrypt]&sign=[whether to sign (true/false, default=true)]
    /api/0/pgp/sign/          <from>/<data>/
                              ?from=[from which key]&data=[the data to sign]
    /api/0/pgp/verify/        <data>/
                              ?data=[the data to verify]
    /api/0/settings/add/      <section.variable>/<value>/
    ... POST only: section.variable=[value|json-string]
    /api/0/settings/set/      <section.variable>/<value>/
    ... POST only: section.variable=[value|json-string]
    /api/0/settings/unset/    <var>/
    ... POST only: var=[section.variables]
    /api/0/tag/               <[+|-]tags>/<msgs>/
    ... POST only: add=[tags]&del=[tags]&mid=[message-ids]
    /api/0/tag/add/           <tag>/
    ... POST only: name=[tag name]&slug=[tag slug]
    /api/0/tag/delete/        <tag>/

### UPDATE

    /api/0/contact/set/       <email>/<attr>/<value>/
    /api/0/message/attach/    <messages>/[<path/to/file>]/
    ... POST only: file-data=[file data]&mid=[metadata-ID]
    /api/0/message/update/    <messages>/<<filename>/
    ... POST only: body=[..]&to=[..]&file-data=[file data]&from=[..]&cc=[..]&subject=[..]&mid=[metadata-ID]&bcc=[..]
    /api/0/settings/add/      <section.variable>/<value>/
    ... POST only: section.variable=[value|json-string]
    /api/0/settings/set/      <section.variable>/<value>/
    ... POST only: section.variable=[value|json-string]

### DELETE

    /api/0/contact/remove/    <email>/
    /api/0/tag/delete/        <tag>/


## Pretty shortcuts (HTML output)

    /           Redirects to /in/inbox/ for now.  (FIXME)
    /in/        Map /in/TAG_NAME/[@<pos>]/ to tag searches.
    /static/    RESERVED FOR LATER.
    /thread/    Map /thread/METADATA_ID/... to view or extract commands.

## Default command URLs (HTML output)

*These accept the same arguments as the API calls above.*

    /contact/
    /contact/add/
    /contact/list/
    /contact/remove/
    /contact/set/
    /filter/list/
    /help/
    /help/splash/
    /help/urlmap/
    /help/variables/
    /message/
    /message/attach/
    /message/compose/
    /message/download/
    /message/draft/
    /message/forward/
    /message/reply/
    /message/send/
    /message/unthread/
    /message/update/
    /message/update/send/
    /page/
    /pgp/checkaddress/
    /pgp/decrypt/
    /pgp/encrypt/
    /pgp/listkeys/
    /pgp/sign/
    /pgp/verify/
    /search/
    /settings/
    /settings/add/
    /settings/set/
    /settings/unset/
    /shownetwork/
    /tag/
    /tag/add/
    /tag/delete/
    /tag/list/


<!-- TestResults(failed=0, attempted=45) -->
